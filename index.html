<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Football Legends</title>
    <style>
        body { background: #1a472a; margin: 0; overflow: hidden; font-family: 'Arial Black', sans-serif; color: white; touch-action: none; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; pointer-events: none; z-index: 10; font-size: 18px; text-shadow: 2px 2px black; }
        canvas { display: block; background: #2e7d32; }
    </style>
</head>
<body>
    <div id="ui">SCORE: <span id="score">0</span></div>
    <canvas id="game"></canvas>

    <script>
        const canvas = document.getElementById("game");
        const ctx = canvas.getContext("2d");
        const scoreText = document.getElementById("score");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let score = 0;
        let gameActive = true;

        // Player setup (Slower, realistic movement)
        let player = { x: canvas.width/2, y: canvas.height - 80, size: 15, targetX: canvas.width/2, targetY: canvas.height - 80 };

        // Massive Player Array (10 teammates, 10 enemies)
        let bots = [];
        for(let i = 0; i < 20; i++) {
            bots.push({
                x: Math.random() * canvas.width,
                y: Math.random() * (canvas.height - 200) + 100,
                size: 15,
                team: i < 10 ? 'blue' : 'red', // 10 Blue, 10 Red
                speed: 1 + Math.random() * 1.5
            });
        }

        canvas.addEventListener('touchmove', (e) => {
            const touch = e.touches[0];
            player.targetX = touch.clientX;
            player.targetY = touch.clientY;
            e.preventDefault();
        }, { passive: false });

        function drawPlayer(x, y, color, isMain) {
            // Shoulders/Jersey
            ctx.fillStyle = color;
            ctx.fillRect(x - 12, y - 5, 24, 15);
            // Helmet
            ctx.fillStyle = isMain ? "#ffd700" : "white"; // Gold helmet for you
            ctx.beginPath(); ctx.arc(x, y - 8, 8, 0, Math.PI * 2); ctx.fill();
            // Face mask line
            ctx.strokeStyle = "black";
            ctx.lineWidth = 1;
            ctx.beginPath(); ctx.moveTo(x - 5, y - 6); ctx.lineTo(x + 5, y - 6); ctx.stroke();
        }

        function update() {
            if (!gameActive) return;

            // Move player toward touch (Added friction so you aren't "too fast")
            player.x += (player.targetX - player.x) * 0.1;
            player.y += (player.targetY - player.y) * 0.1;

            bots.forEach(bot => {
                if (bot.team === 'red') {
                    // Defenders try to tackle you
                    let dx = player.x - bot.x;
                    let dy = player.y - bot.y;
                    let dist = Math.hypot(dx, dy);
                    bot.x += (dx / dist) * bot.speed;
                    bot.y += (dy / dist) * bot.speed;

                    // Check Tackle
                    if (dist < 20) {
                        score = 0; 
                        scoreText.innerText = score;
                        player.x = canvas.width/2; 
                        player.y = canvas.height - 80;
                        player.targetX = player.x;
                        player.targetY = player.y;
                    }
                } else {
                    // Teammates move up field to block
                    bot.y -= bot.speed;
                    if (bot.y < 0) bot.y = canvas.height;
                }
            });

            // Touchdown check
            if (player.y < 40) {
                score++;
                scoreText.innerText = score;
                player.y = canvas.height - 80;
                player.targetY = player.y;
            }
        }

        function draw() {
            // Grass
            ctx.fillStyle = "#2e7d32";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Yard Lines
            ctx.strokeStyle = "rgba(255,255,255,0.3)";
            ctx.lineWidth = 2;
            for(let i = 0; i < canvas.height; i += 60) {
                ctx.beginPath(); ctx.moveTo(0, i); ctx.lineTo(canvas.width, i); ctx.stroke();
            }

            // Endzone
            ctx.fillStyle = "#1b5e20";
            ctx.fillRect(0, 0, canvas.width, 50);

            // Draw all bots
            bots.forEach(bot => drawPlayer(bot.x, bot.y, bot.team === 'blue' ? '#0d47a1' : '#b71c1c', false));

            // Draw You
            drawPlayer(player.x, player.y, "#2196f3", true);
        }

        function loop() { update(); draw(); requestAnimationFrame(loop); }
        loop();
    </script>
</body>
</html>
